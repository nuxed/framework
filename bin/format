#!/usr/bin/env hhvm
<?hh // strict

require __DIR__.'/../vendor/hh_autoload.hh';

<<__EntryPoint>>
async function format(): Awaitable<noreturn> {
  $source = new Nuxed\Io\Folder(__DIR__ . '/../src/Nuxed');
  $tests = new Nuxed\Io\Folder(__DIR__ . '/../tests/Nuxed');
  foreach ($source->files(true, true) as $file) {
    if ($file->ext() === 'hh') {
     exec('hackfmt -i '.$file->path());
    }
  }
  foreach ($tests->files(true, true) as $file) {
    if ($file->ext() === 'hh') {
     exec('hackfmt -i '.$file->path());
    }
  }
  exit(0);
}
